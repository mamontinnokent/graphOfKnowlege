Раз у одного процесса есть вход, а у другого — выход, и их можно подменять, то логично предположить, что их можно соединить. Данный подход носит название **pipeline** (конвейер). Благодаря пайплайну можно соединять программы и протаскивать данные сквозь них, как сквозь цепочку функций, каждая из которых выступает в роли преобразователя или фильтра.

Когда мы грепали, то делали это по какому-то одному слову, но часто возникает задача грепать по нескольким словам. Не важно, как они расположены внутри строки, главное, что они встречаются там вместе. Такую функциональность можно было бы сделать, усложнив саму программу `grep`. Но пайплайн позволяет добиться такого же поведения без необходимости писать сложную программу.

```bash
grep alias .bashrc | grep color

# enable color support of handy aliases
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'
```

`|` — этот символ называется **пайп**, он указывает шеллу взять STDOUT одного процесса, и соединить его с STDIN другого процесса. Поскольку grep принимает на вход текст (все утилиты, которые читают файлы, могут принимать данные через STDIN) и возвращает текст, то его можно комбинировать бесконечно.

![Pipeline](https://cdn2.hexlet.io/derivations/image/original/eyJpZCI6ImQ1YjllNDY3MTFmMDZjMzU3MmZmZTA4NjMzNzJkYzI5LnBuZyIsInN0b3JhZ2UiOiJjYWNoZSJ9?signature=aded1e115a1d4fde37a39e3e9354121b35003dedc714b30c127acbaccf611120)

Запись `grep alias .bashrc | grep color` можно изменить, используя перенаправление. Так она станет проще для модификации:

```bash
cat .bashrc | grep alias | grep color
```

В примере выше файл читается катом и отправляется в STDIN грепа.

Ещё один пример:

```bash
cat source | grep Dog | uniq | sort
```

1.  Читается файл source
2.  Входные данные грепаются по подстроке "Dog"
3.  Убираются дубли (в исходном файле две одинаковых строки "Dog")
4.  Входные данные сортируются и выводятся на экран

Пайплайн стал основой философии Unix, которая звучит так:

-   Пишите программы, которые делают что-то одно и делают это хорошо.
-   Пишите программы, которые бы работали вместе.
-   Пишите программы, которые бы поддерживали текстовые потоки, поскольку это универсальный интерфейс.

Именно поэтому большинство утилит работают с сырым текстом — принимают его на вход и возвращают в STDOUT. Такой подход позволяет получать сложное поведение из крайне простых составных блоков. Такая концепция называется стандартные интерфейсы и хорошо отражена в конструкторах Lego.